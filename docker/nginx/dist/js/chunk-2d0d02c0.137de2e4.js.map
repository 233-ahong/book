{"version":3,"sources":["webpack:///./src/views/system/category/index.vue","webpack:///./src/api/system/category.js","webpack:///src/views/system/category/index.vue","webpack:///./src/views/system/category/index.vue?a37d","webpack:///./src/views/system/category/index.vue?eed3"],"names":["render","_vm","this","_c","_self","staticClass","directives","name","rawName","value","showSearch","expression","ref","attrs","queryParams","nativeOn","$event","type","indexOf","_k","keyCode","key","handleQuery","apply","arguments","model","categoryName","callback","$$v","$set","categoryCode","categoryStatus","_l","categoryStatusDict","dict","label","on","_v","resetQuery","handleAdd","toggleExpandAll","getList","refreshTable","loading","categoryList","isExpandAll","children","hasChildren","scopedSlots","_u","fn","scope","row","handleUpdate","handleDelete","_e","title","open","form","rules","categoryOptions","normalizer","parentId","parseInt","_s","slot","submitForm","cancel","staticRenderFns","listCategory","query","request","url","method","params","getCategory","categoryId","addCategory","data","updateCategory","delCategory","dicts","components","Treeselect","raw","listClass","isDefault","default","required","message","trigger","created","methods","response","id","getTreeselect","reset","modifiedTime","confirm","then","catch","component"],"mappings":"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","file":"js/chunk-2d0d02c0.137de2e4.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"app-container\"},[_c('el-form',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showSearch),expression:\"showSearch\"}],ref:\"queryForm\",attrs:{\"model\":_vm.queryParams,\"size\":\"small\",\"inline\":true,\"label-width\":\"68px\"}},[_c('el-form-item',{attrs:{\"label\":\"分类名称\",\"prop\":\"categoryName\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入分类名称\",\"clearable\":\"\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.handleQuery.apply(null, arguments)}},model:{value:(_vm.queryParams.categoryName),callback:function ($$v) {_vm.$set(_vm.queryParams, \"categoryName\", $$v)},expression:\"queryParams.categoryName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"分类编码\",\"prop\":\"categoryCode\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入分类编码\",\"clearable\":\"\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.handleQuery.apply(null, arguments)}},model:{value:(_vm.queryParams.categoryCode),callback:function ($$v) {_vm.$set(_vm.queryParams, \"categoryCode\", $$v)},expression:\"queryParams.categoryCode\"}})],1),_c('el-form-item',{attrs:{\"label\":\"分类状态\",\"prop\":\"categoryStatus\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择分类状态\",\"clearable\":\"\"},model:{value:(_vm.queryParams.categoryStatus),callback:function ($$v) {_vm.$set(_vm.queryParams, \"categoryStatus\", $$v)},expression:\"queryParams.categoryStatus\"}},_vm._l((_vm.categoryStatusDict),function(dict){return _c('el-option',{key:dict.value,attrs:{\"label\":dict.label,\"value\":dict.value}})}),1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\",\"size\":\"mini\"},on:{\"click\":_vm.handleQuery}},[_vm._v(\"搜索\")]),_c('el-button',{attrs:{\"icon\":\"el-icon-refresh\",\"size\":\"mini\"},on:{\"click\":_vm.resetQuery}},[_vm._v(\"重置\")])],1)],1),_c('el-row',{staticClass:\"mb8\",attrs:{\"gutter\":10}},[_c('el-col',{attrs:{\"span\":1.5}},[_c('el-button',{directives:[{name:\"hasPermi\",rawName:\"v-hasPermi\",value:(['system:category:add']),expression:\"['system:category:add']\"}],attrs:{\"type\":\"primary\",\"plain\":\"\",\"icon\":\"el-icon-plus\",\"size\":\"mini\"},on:{\"click\":_vm.handleAdd}},[_vm._v(\"新增\")])],1),_c('el-col',{attrs:{\"span\":1.5}},[_c('el-button',{attrs:{\"type\":\"info\",\"plain\":\"\",\"icon\":\"el-icon-sort\",\"size\":\"mini\"},on:{\"click\":_vm.toggleExpandAll}},[_vm._v(\"展开/折叠\")])],1),_c('right-toolbar',{attrs:{\"showSearch\":_vm.showSearch},on:{\"update:showSearch\":function($event){_vm.showSearch=$event},\"update:show-search\":function($event){_vm.showSearch=$event},\"queryTable\":_vm.getList}})],1),(_vm.refreshTable)?_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],attrs:{\"data\":_vm.categoryList,\"row-key\":\"categoryId\",\"default-expand-all\":_vm.isExpandAll,\"tree-props\":{ children: 'children', hasChildren: 'hasChildren' }}},[_c('el-table-column',{attrs:{\"label\":\"分类名称\",\"prop\":\"categoryName\"}}),_c('el-table-column',{attrs:{\"label\":\"分类编码\",\"align\":\"center\",\"prop\":\"categoryCode\"}}),_c('el-table-column',{attrs:{\"label\":\"父分类ID\",\"align\":\"center\",\"prop\":\"parentId\"}}),_c('el-table-column',{attrs:{\"label\":\"分类状态\",\"align\":\"center\",\"prop\":\"categoryStatus\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('dict-tag',{attrs:{\"options\":_vm.categoryStatusDict,\"value\":scope.row.categoryStatus}})]}}],null,false,3077300827)}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"align\":\"center\",\"class-name\":\"small-padding fixed-width\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"text\",\"icon\":\"el-icon-edit\"},on:{\"click\":function($event){return _vm.handleUpdate(scope.row)}}},[_vm._v(\"修改\")]),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"text\",\"icon\":\"el-icon-plus\"},on:{\"click\":function($event){return _vm.handleAdd(scope.row)}}},[_vm._v(\"新增\")]),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"text\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){return _vm.handleDelete(scope.row)}}},[_vm._v(\"删除\")])]}}],null,false,2587911775)})],1):_vm._e(),_c('el-dialog',{attrs:{\"title\":_vm.title,\"visible\":_vm.open,\"width\":\"500px\",\"append-to-body\":\"\"},on:{\"update:visible\":function($event){_vm.open=$event}}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"分类名称\",\"prop\":\"categoryName\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入分类名称\"},model:{value:(_vm.form.categoryName),callback:function ($$v) {_vm.$set(_vm.form, \"categoryName\", $$v)},expression:\"form.categoryName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"分类编码\",\"prop\":\"categoryCode\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入分类编码\"},model:{value:(_vm.form.categoryCode),callback:function ($$v) {_vm.$set(_vm.form, \"categoryCode\", $$v)},expression:\"form.categoryCode\"}})],1),_c('el-form-item',{attrs:{\"label\":\"父分类ID\",\"prop\":\"parentId\"}},[_c('treeselect',{attrs:{\"options\":_vm.categoryOptions,\"normalizer\":_vm.normalizer,\"placeholder\":\"请选择父分类ID\"},model:{value:(_vm.form.parentId),callback:function ($$v) {_vm.$set(_vm.form, \"parentId\", $$v)},expression:\"form.parentId\"}})],1),_c('el-form-item',{attrs:{\"label\":\"分类状态\"}},[_c('el-radio-group',{model:{value:(_vm.form.categoryStatus),callback:function ($$v) {_vm.$set(_vm.form, \"categoryStatus\", $$v)},expression:\"form.categoryStatus\"}},_vm._l((_vm.categoryStatusDict),function(dict){return _c('el-radio',{key:dict.value,attrs:{\"label\":parseInt(dict.value)}},[_vm._v(_vm._s(dict.label))])}),1)],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitForm}},[_vm._v(\"确 定\")]),_c('el-button',{on:{\"click\":_vm.cancel}},[_vm._v(\"取 消\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from '@/utils/request'\r\n\r\n// 查询书籍分类列表\r\nexport function listCategory (query) {\r\n  return request({\r\n    url: '/system/category/list',\r\n    method: 'get',\r\n    params: query\r\n  })\r\n}\r\n\r\n// 查询书籍分类详细\r\nexport function getCategory (categoryId) {\r\n  return request({\r\n    url: '/system/category/' + categoryId,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\n// 新增书籍分类\r\nexport function addCategory (data) {\r\n  return request({\r\n    url: '/system/category',\r\n    method: 'post',\r\n    data: data\r\n  })\r\n}\r\n\r\n// 修改书籍分类\r\nexport function updateCategory (data) {\r\n  return request({\r\n    url: '/system/category',\r\n    method: 'put',\r\n    data: data\r\n  })\r\n}\r\n\r\n// 删除书籍分类\r\nexport function delCategory (categoryId) {\r\n  return request({\r\n    url: '/system/category/' + categoryId,\r\n    method: 'delete'\r\n  })\r\n}\r\n","<template>\r\n  <div class=\"app-container\">\r\n    <el-form\r\n      :model=\"queryParams\"\r\n      ref=\"queryForm\"\r\n      size=\"small\"\r\n      :inline=\"true\"\r\n      v-show=\"showSearch\"\r\n      label-width=\"68px\"\r\n    >\r\n      <el-form-item label=\"分类名称\" prop=\"categoryName\">\r\n        <el-input\r\n          v-model=\"queryParams.categoryName\"\r\n          placeholder=\"请输入分类名称\"\r\n          clearable\r\n          @keyup.enter.native=\"handleQuery\"\r\n        />\r\n      </el-form-item>\r\n      <el-form-item label=\"分类编码\" prop=\"categoryCode\">\r\n        <el-input\r\n          v-model=\"queryParams.categoryCode\"\r\n          placeholder=\"请输入分类编码\"\r\n          clearable\r\n          @keyup.enter.native=\"handleQuery\"\r\n        />\r\n      </el-form-item>\r\n      <el-form-item label=\"分类状态\" prop=\"categoryStatus\">\r\n        <el-select\r\n          v-model=\"queryParams.categoryStatus\"\r\n          placeholder=\"请选择分类状态\"\r\n          clearable\r\n        >\r\n          <el-option\r\n            v-for=\"dict in categoryStatusDict\"\r\n            :key=\"dict.value\"\r\n            :label=\"dict.label\"\r\n            :value=\"dict.value\"\r\n          />\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button\r\n          type=\"primary\"\r\n          icon=\"el-icon-search\"\r\n          size=\"mini\"\r\n          @click=\"handleQuery\"\r\n          >搜索</el-button\r\n        >\r\n        <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\"\r\n          >重置</el-button\r\n        >\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <el-row :gutter=\"10\" class=\"mb8\">\r\n      <el-col :span=\"1.5\">\r\n        <el-button\r\n          type=\"primary\"\r\n          plain\r\n          icon=\"el-icon-plus\"\r\n          size=\"mini\"\r\n          @click=\"handleAdd\"\r\n          v-hasPermi=\"['system:category:add']\"\r\n          >新增</el-button\r\n        >\r\n      </el-col>\r\n      <el-col :span=\"1.5\">\r\n        <el-button\r\n          type=\"info\"\r\n          plain\r\n          icon=\"el-icon-sort\"\r\n          size=\"mini\"\r\n          @click=\"toggleExpandAll\"\r\n          >展开/折叠</el-button\r\n        >\r\n      </el-col>\r\n      <right-toolbar\r\n        :showSearch.sync=\"showSearch\"\r\n        @queryTable=\"getList\"\r\n      ></right-toolbar>\r\n    </el-row>\r\n\r\n    <el-table\r\n      v-if=\"refreshTable\"\r\n      v-loading=\"loading\"\r\n      :data=\"categoryList\"\r\n      row-key=\"categoryId\"\r\n      :default-expand-all=\"isExpandAll\"\r\n      :tree-props=\"{ children: 'children', hasChildren: 'hasChildren' }\"\r\n    >\r\n      <el-table-column label=\"分类名称\" prop=\"categoryName\" />\r\n      <el-table-column label=\"分类编码\" align=\"center\" prop=\"categoryCode\" />\r\n      <el-table-column label=\"父分类ID\" align=\"center\" prop=\"parentId\" />\r\n      <el-table-column label=\"分类状态\" align=\"center\" prop=\"categoryStatus\">\r\n        <template slot-scope=\"scope\">\r\n          <dict-tag\r\n            :options=\"categoryStatusDict\"\r\n            :value=\"scope.row.categoryStatus\"\r\n          />\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        label=\"操作\"\r\n        align=\"center\"\r\n        class-name=\"small-padding fixed-width\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"text\"\r\n            icon=\"el-icon-edit\"\r\n            @click=\"handleUpdate(scope.row)\"\r\n            >修改</el-button\r\n          >\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"text\"\r\n            icon=\"el-icon-plus\"\r\n            @click=\"handleAdd(scope.row)\"\r\n            >新增</el-button\r\n          >\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"text\"\r\n            icon=\"el-icon-delete\"\r\n            @click=\"handleDelete(scope.row)\"\r\n            >删除</el-button\r\n          >\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 添加或修改书籍分类对话框 -->\r\n    <el-dialog :title=\"title\" :visible.sync=\"open\" width=\"500px\" append-to-body>\r\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"80px\">\r\n        <el-form-item label=\"分类名称\" prop=\"categoryName\">\r\n          <el-input v-model=\"form.categoryName\" placeholder=\"请输入分类名称\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"分类编码\" prop=\"categoryCode\">\r\n          <el-input v-model=\"form.categoryCode\" placeholder=\"请输入分类编码\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"父分类ID\" prop=\"parentId\">\r\n          <treeselect\r\n            v-model=\"form.parentId\"\r\n            :options=\"categoryOptions\"\r\n            :normalizer=\"normalizer\"\r\n            placeholder=\"请选择父分类ID\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"分类状态\">\r\n          <el-radio-group v-model=\"form.categoryStatus\">\r\n            <el-radio\r\n              v-for=\"dict in categoryStatusDict\"\r\n              :key=\"dict.value\"\r\n              :label=\"parseInt(dict.value)\"\r\n              >{{ dict.label }}</el-radio\r\n            >\r\n          </el-radio-group>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\r\n        <el-button @click=\"cancel\">取 消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  listCategory,\r\n  getCategory,\r\n  delCategory,\r\n  addCategory,\r\n  updateCategory\r\n} from '@/api/system/category'\r\nimport Treeselect from '@riophae/vue-treeselect'\r\nimport '@riophae/vue-treeselect/dist/vue-treeselect.css'\r\n\r\nexport default {\r\n  name: 'Category',\r\n  dicts: [],\r\n  components: {\r\n    Treeselect\r\n  },\r\n  data () {\r\n    return {\r\n      // 分类状态\r\n      categoryStatusDict: [\r\n        {\r\n          value: '0',\r\n          label: '已分类',\r\n          raw: {\r\n            listClass: 'primary',\r\n            isDefault: 'Y',\r\n            default: true\r\n          }\r\n        },\r\n        {\r\n          value: '1',\r\n          label: '未分类',\r\n          raw: {\r\n            listClass: 'primary',\r\n            isDefault: 'Y',\r\n            default: true\r\n          }\r\n        }\r\n      ],\r\n      // 遮罩层\r\n      loading: true,\r\n      // 显示搜索条件\r\n      showSearch: true,\r\n      // 书籍分类表格数据\r\n      categoryList: [],\r\n      // 书籍分类树选项\r\n      categoryOptions: [],\r\n      // 弹出层标题\r\n      title: '',\r\n      // 是否显示弹出层\r\n      open: false,\r\n      // 是否展开，默认全部展开\r\n      isExpandAll: true,\r\n      // 重新渲染表格状态\r\n      refreshTable: true,\r\n      // 查询参数\r\n      queryParams: {\r\n        categoryName: null,\r\n        categoryCode: null,\r\n        parentId: null,\r\n        categoryStatus: null\r\n      },\r\n      // 表单参数\r\n      form: {},\r\n      // 表单校验\r\n      rules: {\r\n        categoryName: [\r\n          { required: true, message: '分类名称不能为空', trigger: 'blur' }\r\n        ],\r\n        categoryCode: [\r\n          { required: true, message: '分类编码不能为空', trigger: 'blur' }\r\n        ],\r\n        parentId: [\r\n          { required: true, message: '父分类ID不能为空', trigger: 'blur' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  created () {\r\n    this.getList()\r\n  },\r\n  methods: {\r\n    /** 查询书籍分类列表 */\r\n    getList () {\r\n      this.loading = true\r\n      listCategory(this.queryParams).then((response) => {\r\n        this.categoryList = this.handleTree(\r\n          response.data,\r\n          'categoryId',\r\n          'parentId'\r\n        )\r\n        this.loading = false\r\n      })\r\n    },\r\n    /** 转换书籍分类数据结构 */\r\n    normalizer (node) {\r\n      if (node.children && !node.children.length) {\r\n        delete node.children\r\n      }\r\n      return {\r\n        id: node.categoryId,\r\n        label: node.categoryName,\r\n        children: node.children\r\n      }\r\n    },\r\n    /** 查询书籍分类下拉树结构 */\r\n    getTreeselect () {\r\n      listCategory().then((response) => {\r\n        this.categoryOptions = []\r\n        const data = { categoryId: 0, categoryName: '顶级节点', children: [] }\r\n        data.children = this.handleTree(\r\n          response.data,\r\n          'categoryId',\r\n          'parentId'\r\n        )\r\n        this.categoryOptions.push(data)\r\n      })\r\n    },\r\n    // 取消按钮\r\n    cancel () {\r\n      this.open = false\r\n      this.reset()\r\n    },\r\n    // 表单重置\r\n    reset () {\r\n      this.form = {\r\n        categoryId: null,\r\n        categoryName: null,\r\n        categoryCode: null,\r\n        parentId: null,\r\n        categoryStatus: 0,\r\n\r\n        modifiedTime: null\r\n      }\r\n      this.resetForm('form')\r\n    },\r\n    /** 搜索按钮操作 */\r\n    handleQuery () {\r\n      this.getList()\r\n    },\r\n    /** 重置按钮操作 */\r\n    resetQuery () {\r\n      this.resetForm('queryForm')\r\n      this.handleQuery()\r\n    },\r\n    /** 新增按钮操作 */\r\n    handleAdd (row) {\r\n      this.reset()\r\n      this.getTreeselect()\r\n      if (row != null && row.categoryId) {\r\n        this.form.parentId = row.categoryId\r\n      } else {\r\n        this.form.parentId = 0\r\n      }\r\n      this.open = true\r\n      this.title = '添加书籍分类'\r\n    },\r\n    /** 展开/折叠操作 */\r\n    toggleExpandAll () {\r\n      this.refreshTable = false\r\n      this.isExpandAll = !this.isExpandAll\r\n      this.$nextTick(() => {\r\n        this.refreshTable = true\r\n      })\r\n    },\r\n    /** 修改按钮操作 */\r\n    handleUpdate (row) {\r\n      this.reset()\r\n      this.getTreeselect()\r\n      if (row != null) {\r\n        this.form.parentId = row.categoryId\r\n      }\r\n      getCategory(row.categoryId).then((response) => {\r\n        this.form = response.data\r\n        this.open = true\r\n        this.title = '修改书籍分类'\r\n      })\r\n    },\r\n    /** 提交按钮 */\r\n    submitForm () {\r\n      this.$refs.form.validate((valid) => {\r\n        if (valid) {\r\n          if (this.form.categoryId != null) {\r\n            updateCategory(this.form).then((response) => {\r\n              this.$modal.msgSuccess('修改成功')\r\n              this.open = false\r\n              this.getList()\r\n            })\r\n          } else {\r\n            addCategory(this.form).then((response) => {\r\n              this.$modal.msgSuccess('新增成功')\r\n              this.open = false\r\n              this.getList()\r\n            })\r\n          }\r\n        }\r\n      })\r\n    },\r\n    /** 删除按钮操作 */\r\n    handleDelete (row) {\r\n      this.$modal\r\n        .confirm('是否确认删除书籍分类编号为\"' + row.categoryId + '\"的数据项？')\r\n        .then(function () {\r\n          return delCategory(row.categoryId)\r\n        })\r\n        .then(() => {\r\n          this.getList()\r\n          this.$modal.msgSuccess('删除成功')\r\n        })\r\n        .catch(() => {})\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=27fe690a&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}