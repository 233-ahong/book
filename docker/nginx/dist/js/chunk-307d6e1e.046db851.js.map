{"version":3,"sources":["webpack:///./src/api/book/borrow.js","webpack:///./src/views/book/borrow/index.vue","webpack:///src/views/book/borrow/index.vue","webpack:///./src/views/book/borrow/index.vue?c668","webpack:///./src/views/book/borrow/index.vue?89de"],"names":["listBorrow","query","request","url","method","params","userListBorrow","getBorrow","borrowId","addBorrow","data","updateBorrow","returnBook","bookId","render","_vm","this","_c","_self","staticClass","directives","name","rawName","value","showSearch","expression","ref","attrs","queryParams","nativeOn","$event","type","indexOf","_k","keyCode","key","handleQuery","apply","arguments","model","bookName","callback","$$v","$set","borrowState","_l","dict","label","on","_v","resetQuery","getList","loading","borrowList","handleSelectionChange","scopedSlots","_u","fn","scope","options","row","borrowingTime","_s","parseTime","remandDate","modifiedTime","handleDelete","_e","total","pageNum","pageSize","staticRenderFns","raw","listClass","isDefault","default","ids","bookIds","single","multiple","title","open","userId","userName","form","rules","required","message","trigger","created","methods","cancel","reset","handleAdd","handleUpdate","submitForm","then","catch","component"],"mappings":"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,YAAa,WAAYE,IAAS,WAAaf,EAAIoC,YAAY,IAExtHoB,EAAkB,G,YCwFP,GACflD,cACAX,OACA,OACAiD,UACApC,UACAwB,WACAyB,KACAC,oBACAC,cACAC,aAEA,CACApD,UACAwB,WACAyB,KACAC,oBACAC,cACAC,aAEA,CACApD,UACAwB,YACAyB,KACAC,oBACAC,cACAC,aAEA,CACApD,UACAwB,YACAyB,KACAC,oBACAC,cACAC,cAGA7B,OACAC,YACAxB,UACAiD,KACAC,oBACAC,cACAC,aAEA,CACA5B,YACAxB,UACAiD,KACAC,oBACAC,cACAC,aAEA,CACA5B,aACAxB,UACAiD,KACAC,mBACAC,cACAC,aAEA,CACA5B,YACAxB,UACAiD,KACAC,oBACAC,cACAC,cAIAvB,WAEAwB,OACAC,WAEAC,UAEAC,YAEAvD,cAEA4C,QAEAf,cAEA2B,SAEAC,QAEArD,aACAyC,UACAC,YACAY,YACAC,cACAtE,YACA2B,cACAqB,mBACAG,gBACAC,kBACArB,kBAGAwC,QAEAC,OACAH,QACA,CAAAI,YAAAC,mBAAAC,iBAEAL,UACA,CAAAG,YAAAC,kBAAAC,iBAEA3E,QACA,CAAAyE,YAAAC,mBAAAC,iBAEAhD,UACA,CAAA8C,YAAAC,mBAAAC,iBAEA3B,eACA,CAAAyB,YAAAC,mBAAAC,iBAEAxB,YACA,CAAAsB,YAAAC,mBAAAC,iBAEAvB,cACA,CAAAqB,YAAAC,mBAAAC,iBAEA5C,aACA,CAAA0C,YAAAC,mBAAAC,oBAKAC,UACA,gBAEAC,SAEAvC,UACA,gBACA7C,0CACA,uBACA,mBACA,mBAIAqF,SACA,aACA,cAGAC,QACA,WACApF,cACA0E,YACAC,cACAtE,YACA2B,cACAqB,mBACAG,gBACAC,kBACArB,kBAEA,wBAGAR,cACA,2BACA,gBAGAc,aACA,4BACA,oBAGAI,yBACA,8BACA,gCACA,yBACA,yBAGAuC,YACA,aACA,aACA,uBAGAC,gBACA,aACA,6BACAvF,2BACA,iBACA,aACA,yBAIAwF,aACA,6BACA,IACA,yBACApF,mCACA,+BACA,aACA,iBAGAF,mCACA,+BACA,aACA,qBAOAyD,gBACA,6BACA,yBACA,wEACA,qCACA8B,KAAA,KACA,eACA,iCACAC,MAAA,WC9T6W,I,YCOzWC,EAAY,eACd,EACApF,EACAyD,GACA,EACA,KACA,KACA,MAIa,aAAA2B,E","file":"js/chunk-307d6e1e.046db851.js","sourcesContent":["import request from '@/utils/request'\r\n\r\n// 查询借阅记录详情列表\r\nexport function listBorrow (query) {\r\n  return request({\r\n    url: '/book/borrow/list',\r\n    method: 'get',\r\n    params: query\r\n  })\r\n}\r\n\r\nexport function userListBorrow (query) {\r\n  return request({\r\n    url: '/book/borrow/userList',\r\n    method: 'get',\r\n    params: query\r\n  })\r\n}\r\n\r\n// 查询借阅记录详情详细\r\nexport function getBorrow (borrowId) {\r\n  return request({\r\n    url: '/book/borrow/' + borrowId,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\n// 新增借阅记录详情\r\nexport function addBorrow (data) {\r\n  return request({\r\n    url: '/book/borrow',\r\n    method: 'post',\r\n    data: data\r\n  })\r\n}\r\n\r\n// 修改借阅记录详情\r\nexport function updateBorrow (data) {\r\n  return request({\r\n    url: '/book/borrow',\r\n    method: 'put',\r\n    data: data\r\n  })\r\n}\r\n\r\n// 删除借阅记录详情\r\nexport function delBorrow (borrowId) {\r\n  return request({\r\n    url: '/book/borrow/' + borrowId,\r\n    method: 'delete'\r\n  })\r\n}\r\n\r\nexport function returnBook (borrowId, bookId) {\r\n  return request({\r\n    url: '/book/borrow/returnBook/' + bookId + '/' + borrowId,\r\n    method: 'delete'\r\n  })\r\n}\r\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"app-container\"},[_c('el-form',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showSearch),expression:\"showSearch\"}],ref:\"queryForm\",attrs:{\"model\":_vm.queryParams,\"size\":\"small\",\"inline\":true,\"label-width\":\"68px\"}},[_c('el-form-item',{attrs:{\"label\":\"图书名称\",\"prop\":\"bookName\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入图书名称\",\"clearable\":\"\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.handleQuery.apply(null, arguments)}},model:{value:(_vm.queryParams.bookName),callback:function ($$v) {_vm.$set(_vm.queryParams, \"bookName\", $$v)},expression:\"queryParams.bookName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"归还状态\",\"prop\":\"borrowState\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择归还状态\",\"clearable\":\"\"},model:{value:(_vm.queryParams.borrowState),callback:function ($$v) {_vm.$set(_vm.queryParams, \"borrowState\", $$v)},expression:\"queryParams.borrowState\"}},_vm._l((_vm.dict),function(dict){return _c('el-option',{key:dict.value,attrs:{\"label\":dict.label,\"value\":dict.value}})}),1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\",\"size\":\"mini\"},on:{\"click\":_vm.handleQuery}},[_vm._v(\"搜索\")]),_c('el-button',{attrs:{\"icon\":\"el-icon-refresh\",\"size\":\"mini\"},on:{\"click\":_vm.resetQuery}},[_vm._v(\"重置\")])],1)],1),_c('el-row',{staticClass:\"mb8\",attrs:{\"gutter\":10}},[_c('right-toolbar',{attrs:{\"showSearch\":_vm.showSearch},on:{\"update:showSearch\":function($event){_vm.showSearch=$event},\"update:show-search\":function($event){_vm.showSearch=$event},\"queryTable\":_vm.getList}})],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],attrs:{\"data\":_vm.borrowList},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"label\":\"借阅人\",\"align\":\"center\",\"prop\":\"userName\"}}),_c('el-table-column',{attrs:{\"label\":\"图书名称\",\"align\":\"center\",\"prop\":\"bookName\"}}),_c('el-table-column',{attrs:{\"label\":\"借阅时长\",\"align\":\"center\",\"prop\":\"borrowingTime\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('dict-tag',{attrs:{\"options\":_vm.options,\"value\":scope.row.borrowingTime}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"还书日期\",\"align\":\"center\",\"prop\":\"remandDate\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(_vm.parseTime(scope.row.remandDate, '{y}-{m}-{d}')))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"借阅时间\",\"align\":\"center\",\"prop\":\"modifiedTime\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(_vm.parseTime(scope.row.modifiedTime, '{y}-{m}-{d}')))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"归还状态\",\"align\":\"center\",\"prop\":\"borrowState\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('dict-tag',{attrs:{\"options\":_vm.dict,\"value\":scope.row.borrowState}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"align\":\"center\",\"class-name\":\"small-padding fixed-width\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.borrowState === 1 || scope.row.borrowState === 2)?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"text\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){return _vm.handleDelete(scope.row)}}},[_vm._v(\"归还\")]):_vm._e()]}}])})],1),_c('pagination',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.total>0),expression:\"total>0\"}],attrs:{\"total\":_vm.total,\"page\":_vm.queryParams.pageNum,\"limit\":_vm.queryParams.pageSize},on:{\"update:page\":function($event){return _vm.$set(_vm.queryParams, \"pageNum\", $event)},\"update:limit\":function($event){return _vm.$set(_vm.queryParams, \"pageSize\", $event)},\"pagination\":_vm.getList}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"app-container\">\r\n    <el-form :model=\"queryParams\" ref=\"queryForm\" size=\"small\" :inline=\"true\" v-show=\"showSearch\" label-width=\"68px\">\r\n      <el-form-item label=\"图书名称\" prop=\"bookName\">\r\n        <el-input\r\n          v-model=\"queryParams.bookName\"\r\n          placeholder=\"请输入图书名称\"\r\n          clearable\r\n          @keyup.enter.native=\"handleQuery\"\r\n        />\r\n      </el-form-item>\r\n      <el-form-item label=\"归还状态\" prop=\"borrowState\">\r\n        <el-select v-model=\"queryParams.borrowState\" placeholder=\"请选择归还状态\" clearable>\r\n          <el-option\r\n            v-for=\"dict in dict\"\r\n            :key=\"dict.value\"\r\n            :label=\"dict.label\"\r\n            :value=\"dict.value\"\r\n          />\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\r\n        <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <el-row :gutter=\"10\" class=\"mb8\">\r\n<!--      <el-col :span=\"1.5\">\r\n        <el-button\r\n          type=\"success\"\r\n          plain\r\n          icon=\"el-icon-edit\"\r\n          size=\"mini\"\r\n          :disabled=\"multiple\"\r\n          @click=\"handleDelete\"\r\n        >归还图书</el-button>\r\n      </el-col>-->\r\n      <right-toolbar :showSearch.sync=\"showSearch\" @queryTable=\"getList\"></right-toolbar>\r\n    </el-row>\r\n\r\n    <el-table v-loading=\"loading\" :data=\"borrowList\" @selection-change=\"handleSelectionChange\">\r\n      <el-table-column label=\"借阅人\" align=\"center\" prop=\"userName\" />\r\n      <el-table-column label=\"图书名称\" align=\"center\" prop=\"bookName\" />\r\n      <el-table-column label=\"借阅时长\" align=\"center\" prop=\"borrowingTime\" >\r\n        <template v-slot=\"scope\">\r\n          <dict-tag :options=\"options\" :value=\"scope.row.borrowingTime\"/>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"还书日期\" align=\"center\" prop=\"remandDate\" width=\"180\">\r\n        <template v-slot=\"scope\">\r\n          <span>{{ parseTime(scope.row.remandDate, '{y}-{m}-{d}') }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"借阅时间\" align=\"center\" prop=\"modifiedTime\" width=\"180\">\r\n        <template v-slot=\"scope\">\r\n          <span>{{ parseTime(scope.row.modifiedTime, '{y}-{m}-{d}') }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"归还状态\" align=\"center\" prop=\"borrowState\">\r\n        <template v-slot=\"scope\">\r\n          <dict-tag :options=\"dict\" :value=\"scope.row.borrowState\"/>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\r\n        <template v-slot=\"scope\">\r\n          <el-button\r\n            v-if=\"scope.row.borrowState === 1 || scope.row.borrowState === 2\"\r\n            size=\"mini\"\r\n            type=\"text\"\r\n            icon=\"el-icon-delete\"\r\n            @click=\"handleDelete(scope.row)\"\r\n          >归还</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <pagination\r\n      v-show=\"total>0\"\r\n      :total=\"total\"\r\n      :page.sync=\"queryParams.pageNum\"\r\n      :limit.sync=\"queryParams.pageSize\"\r\n      @pagination=\"getList\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getBorrow, addBorrow, updateBorrow, returnBook, userListBorrow } from '@/api/book/borrow'\r\n\r\nexport default {\r\n  name: 'Borrow',\r\n  data () {\r\n    return {\r\n      options: [{\r\n        value: '1',\r\n        label: '一周',\r\n        raw: {\r\n          listClass: 'primary',\r\n          isDefault: 'Y',\r\n          default: true\r\n        }\r\n      }, {\r\n        value: '2',\r\n        label: '两周',\r\n        raw: {\r\n          listClass: 'primary',\r\n          isDefault: 'Y',\r\n          default: true\r\n        }\r\n      }, {\r\n        value: '3',\r\n        label: '一个月',\r\n        raw: {\r\n          listClass: 'primary',\r\n          isDefault: 'Y',\r\n          default: true\r\n        }\r\n      }, {\r\n        value: '4',\r\n        label: '两个月',\r\n        raw: {\r\n          listClass: 'primary',\r\n          isDefault: 'Y',\r\n          default: true\r\n        }\r\n      }],\r\n      dict: [{\r\n        label: '已归还',\r\n        value: '0',\r\n        raw: {\r\n          listClass: 'success',\r\n          isDefault: 'Y',\r\n          default: true\r\n        }\r\n      }, {\r\n        label: '未归还',\r\n        value: '1',\r\n        raw: {\r\n          listClass: 'primary',\r\n          isDefault: 'Y',\r\n          default: true\r\n        }\r\n      }, {\r\n        label: '逾期未还',\r\n        value: '2',\r\n        raw: {\r\n          listClass: 'danger',\r\n          isDefault: 'Y',\r\n          default: true\r\n        }\r\n      }, {\r\n        label: '归还中',\r\n        value: '3',\r\n        raw: {\r\n          listClass: 'success',\r\n          isDefault: 'Y',\r\n          default: true\r\n        }\r\n      }],\r\n      // 遮罩层\r\n      loading: true,\r\n      // 选中数组\r\n      ids: [],\r\n      bookIds: [],\r\n      // 非单个禁用\r\n      single: true,\r\n      // 非多个禁用\r\n      multiple: true,\r\n      // 显示搜索条件\r\n      showSearch: true,\r\n      // 总条数\r\n      total: 0,\r\n      // 借阅记录详情表格数据\r\n      borrowList: [],\r\n      // 弹出层标题\r\n      title: '',\r\n      // 是否显示弹出层\r\n      open: false,\r\n      // 查询参数\r\n      queryParams: {\r\n        pageNum: 1,\r\n        pageSize: 10,\r\n        userId: null,\r\n        userName: null,\r\n        bookId: null,\r\n        bookName: null,\r\n        borrowingTime: null,\r\n        remandDate: null,\r\n        modifiedTime: null,\r\n        borrowState: null\r\n      },\r\n      // 表单参数\r\n      form: {},\r\n      // 表单校验\r\n      rules: {\r\n        userId: [\r\n          { required: true, message: '用户ID不能为空', trigger: 'blur' }\r\n        ],\r\n        userName: [\r\n          { required: true, message: '借阅人不能为空', trigger: 'blur' }\r\n        ],\r\n        bookId: [\r\n          { required: true, message: '图书ID不能为空', trigger: 'blur' }\r\n        ],\r\n        bookName: [\r\n          { required: true, message: '图书名称不能为空', trigger: 'blur' }\r\n        ],\r\n        borrowingTime: [\r\n          { required: true, message: '借阅时长不能为空', trigger: 'blur' }\r\n        ],\r\n        remandDate: [\r\n          { required: true, message: '还书日期不能为空', trigger: 'blur' }\r\n        ],\r\n        modifiedTime: [\r\n          { required: true, message: '借阅时间不能为空', trigger: 'blur' }\r\n        ],\r\n        borrowState: [\r\n          { required: true, message: '归还状态不能为空', trigger: 'blur' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  created () {\r\n    this.getList()\r\n  },\r\n  methods: {\r\n    /** 查询借阅记录详情列表 */\r\n    getList () {\r\n      this.loading = true\r\n      userListBorrow(this.queryParams).then(response => {\r\n        this.borrowList = response.rows\r\n        this.total = response.total\r\n        this.loading = false\r\n      })\r\n    },\r\n    // 取消按钮\r\n    cancel () {\r\n      this.open = false\r\n      this.reset()\r\n    },\r\n    // 表单重置\r\n    reset () {\r\n      this.form = {\r\n        borrowId: null,\r\n        userId: null,\r\n        userName: null,\r\n        bookId: null,\r\n        bookName: null,\r\n        borrowingTime: null,\r\n        remandDate: null,\r\n        modifiedTime: null,\r\n        borrowState: null\r\n      }\r\n      this.resetForm('form')\r\n    },\r\n    /** 搜索按钮操作 */\r\n    handleQuery () {\r\n      this.queryParams.pageNum = 1\r\n      this.getList()\r\n    },\r\n    /** 重置按钮操作 */\r\n    resetQuery () {\r\n      this.resetForm('queryForm')\r\n      this.handleQuery()\r\n    },\r\n    // 多选框选中数据\r\n    handleSelectionChange (selection) {\r\n      this.ids = selection.map(item => item.borrowId)\r\n      this.bookIds = selection.map(item => item.bookId)\r\n      this.single = selection.length !== 1\r\n      this.multiple = !selection.length\r\n    },\r\n    /** 新增按钮操作 */\r\n    handleAdd () {\r\n      this.reset()\r\n      this.open = true\r\n      this.title = '添加借阅记录详情'\r\n    },\r\n    /** 修改按钮操作 */\r\n    handleUpdate (row) {\r\n      this.reset()\r\n      const borrowId = row.borrowId || this.ids\r\n      getBorrow(borrowId).then(response => {\r\n        this.form = response.data\r\n        this.open = true\r\n        this.title = '修改借阅记录详情'\r\n      })\r\n    },\r\n    /** 提交按钮 */\r\n    submitForm () {\r\n      this.$refs.form.validate(valid => {\r\n        if (valid) {\r\n          if (this.form.borrowId != null) {\r\n            updateBorrow(this.form).then(response => {\r\n              this.$modal.msgSuccess('修改成功')\r\n              this.open = false\r\n              this.getList()\r\n            })\r\n          } else {\r\n            addBorrow(this.form).then(response => {\r\n              this.$modal.msgSuccess('新增成功')\r\n              this.open = false\r\n              this.getList()\r\n            })\r\n          }\r\n        }\r\n      })\r\n    },\r\n    /** 删除按钮操作 */\r\n    handleDelete (row) {\r\n      const borrowIds = row.borrowId || this.ids\r\n      const bookIds = row.bookId || this.bookIds\r\n      this.$modal.confirm('是否确认归还书名为 《' + row.bookName + '》 的图书？').then(function () {\r\n        return returnBook(borrowIds, bookIds, 'user')\r\n      }).then(() => {\r\n        this.getList()\r\n        this.$modal.msgSuccess('归还成功')\r\n      }).catch(() => {\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=272a22ce&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}