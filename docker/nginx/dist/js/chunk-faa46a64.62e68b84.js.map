{"version":3,"sources":["webpack:///./src/views/book/bookInfo/index.vue?585f","webpack:///./src/views/book/bookInfo/index.vue","webpack:///./src/api/book/bookInfo.js","webpack:///src/views/book/bookInfo/index.vue","webpack:///./src/views/book/bookInfo/index.vue?6189","webpack:///./src/views/book/bookInfo/index.vue?626d"],"names":["render","_vm","this","_c","_self","staticClass","directives","name","rawName","value","showSearch","expression","ref","attrs","queryParams","nativeOn","$event","type","indexOf","_k","keyCode","key","handleQuery","apply","arguments","model","bookName","callback","$$v","$set","bookPress","bookAuthor","bookCategory","_l","dict","label","on","_v","resetQuery","getList","bookInfoList","item","index","slot","_s","descript","coverAddress","price","bookRemaining","openDialog","bookId","total","pageNum","pageSize","title","open","options","borrowBooks","cancel","staticRenderFns","listBookInfo","query","request","url","method","params","getBookInfo","addBookInfo","data","updateBookInfo","delBookInfo","id","raw","listClass","isDefault","default","loading","ids","single","multiple","bookCore","barCode","publishStatus","auditStatus","bookPage","indate","modifiedTime","form","rules","required","message","trigger","created","methods","reset","handleSelectionChange","handleAdd","handleUpdate","submitForm","handleDelete","then","catch","component"],"mappings":"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","file":"js/chunk-faa46a64.62e68b84.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=5f643946&prod&lang=scss&scoped=true&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"app-container\"},[_c('el-form',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showSearch),expression:\"showSearch\"}],ref:\"queryForm\",attrs:{\"model\":_vm.queryParams,\"size\":\"small\",\"inline\":true,\"label-width\":\"68px\"}},[_c('el-form-item',{attrs:{\"label\":\"图书名称\",\"prop\":\"bookName\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入图书名称\",\"clearable\":\"\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.handleQuery.apply(null, arguments)}},model:{value:(_vm.queryParams.bookName),callback:function ($$v) {_vm.$set(_vm.queryParams, \"bookName\", $$v)},expression:\"queryParams.bookName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"图书出版社\",\"prop\":\"bookPress\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入图书出版社\",\"clearable\":\"\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.handleQuery.apply(null, arguments)}},model:{value:(_vm.queryParams.bookPress),callback:function ($$v) {_vm.$set(_vm.queryParams, \"bookPress\", $$v)},expression:\"queryParams.bookPress\"}})],1),_c('el-form-item',{attrs:{\"label\":\"图书作者\",\"prop\":\"bookAuthor\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入图书作者\",\"clearable\":\"\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.handleQuery.apply(null, arguments)}},model:{value:(_vm.queryParams.bookAuthor),callback:function ($$v) {_vm.$set(_vm.queryParams, \"bookAuthor\", $$v)},expression:\"queryParams.bookAuthor\"}})],1),_c('el-form-item',{attrs:{\"label\":\"分类\",\"prop\":\"bookCategory\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择分类\",\"clearable\":\"\"},model:{value:(_vm.queryParams.bookCategory),callback:function ($$v) {_vm.$set(_vm.queryParams, \"bookCategory\", $$v)},expression:\"queryParams.bookCategory\"}},_vm._l((_vm.bookCategory),function(dict){return _c('el-option',{key:dict.value,attrs:{\"label\":dict.label,\"value\":dict.value}})}),1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\",\"size\":\"mini\"},on:{\"click\":_vm.handleQuery}},[_vm._v(\"搜索\")]),_c('el-button',{attrs:{\"icon\":\"el-icon-refresh\",\"size\":\"mini\"},on:{\"click\":_vm.resetQuery}},[_vm._v(\"重置\")])],1)],1),_c('el-row',{staticClass:\"mb8\",attrs:{\"gutter\":10}},[_c('right-toolbar',{attrs:{\"showSearch\":_vm.showSearch},on:{\"update:showSearch\":function($event){_vm.showSearch=$event},\"update:show-search\":function($event){_vm.showSearch=$event},\"queryTable\":_vm.getList}})],1),_c('el-row',{attrs:{\"gutter\":20}},_vm._l((_vm.bookInfoList),function(item,index){return _c('el-col',{key:index,attrs:{\"span\":6}},[_c('el-card',[_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"placement\":\"top-start\"}},[_c('div',{staticClass:\"div-descript\",attrs:{\"slot\":\"content\"},slot:\"content\"},[_vm._v(\"简介：\"+_vm._s(item.descript))]),_c('div',[_c('div',[_c('el-image',{staticClass:\"el-image-add\",attrs:{\"src\":item.coverAddress}})],1),_c('el-descriptions',{attrs:{\"column\":2}},[_c('el-descriptions-item',{attrs:{\"label\":\"图书名称\"}},[_vm._v(_vm._s(item.bookName))]),_c('el-descriptions-item',{attrs:{\"label\":\"图书出版社\"}},[_vm._v(_vm._s(item.bookPress))]),_c('el-descriptions-item',{attrs:{\"label\":\"图书售格\"}},[_vm._v(_vm._s(item.price))]),_c('el-descriptions-item',{attrs:{\"label\":\"图书分类\"}},[_c('dict-tag',{attrs:{\"options\":_vm.bookCategory,\"value\":item.bookCategory}})],1),_c('el-descriptions-item',{attrs:{\"label\":\"图书余量\"}},[_vm._v(_vm._s(item.bookRemaining))])],1),_c('el-button',{staticClass:\"el-button-div\",attrs:{\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.openDialog(item.bookId,item.bookName)}}},[_vm._v(\"借阅\")])],1)])],1)],1)}),1),_c('pagination',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.total>0),expression:\"total>0\"}],attrs:{\"total\":_vm.total,\"page\":_vm.queryParams.pageNum,\"limit\":_vm.queryParams.pageSize},on:{\"update:page\":function($event){return _vm.$set(_vm.queryParams, \"pageNum\", $event)},\"update:limit\":function($event){return _vm.$set(_vm.queryParams, \"pageSize\", $event)},\"pagination\":_vm.getList}}),_c('el-dialog',{attrs:{\"title\":_vm.title,\"visible\":_vm.open,\"width\":\"500px\",\"append-to-body\":\"\"},on:{\"update:visible\":function($event){_vm.open=$event}}},[_c('div',[_c('label',[_vm._v(\"借阅时长\")]),_c('el-select',{attrs:{\"placeholder\":\"请选择借阅时长\"},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}},_vm._l((_vm.options),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.borrowBooks}},[_vm._v(\"确 定\")]),_c('el-button',{on:{\"click\":_vm.cancel}},[_vm._v(\"取 消\")])],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from '@/utils/request'\r\n\r\n// 查询图书信息列表\r\nexport function listBookInfo (query) {\r\n  return request({\r\n    url: '/book/bookInfo/list',\r\n    method: 'get',\r\n    params: query\r\n  })\r\n}\r\n\r\n// 查询图书信息详细\r\nexport function getBookInfo (bookId) {\r\n  return request({\r\n    url: '/book/bookInfo/' + bookId,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\n// 新增图书信息\r\nexport function addBookInfo (data) {\r\n  return request({\r\n    url: '/book/bookInfo',\r\n    method: 'post',\r\n    data: data\r\n  })\r\n}\r\n\r\n// 修改图书信息\r\nexport function updateBookInfo (data) {\r\n  return request({\r\n    url: '/book/bookInfo',\r\n    method: 'put',\r\n    data: data\r\n  })\r\n}\r\n\r\n// 删除图书信息\r\nexport function delBookInfo (bookId) {\r\n  return request({\r\n    url: '/book/bookInfo/' + bookId,\r\n    method: 'delete'\r\n  })\r\n}\r\nexport function borrowBooks (bookId, data) {\r\n  return request({\r\n    url: '/book/bookInfo/borrow/' + bookId + '/' + data,\r\n    method: 'get'\r\n  })\r\n}\r\n","<template>\r\n  <div class=\"app-container\">\r\n    <el-form :model=\"queryParams\" ref=\"queryForm\" size=\"small\" :inline=\"true\" v-show=\"showSearch\" label-width=\"68px\">\r\n      <el-form-item label=\"图书名称\" prop=\"bookName\">\r\n        <el-input\r\n          v-model=\"queryParams.bookName\"\r\n          placeholder=\"请输入图书名称\"\r\n          clearable\r\n          @keyup.enter.native=\"handleQuery\"\r\n        />\r\n      </el-form-item>\r\n      <el-form-item label=\"图书出版社\" prop=\"bookPress\">\r\n        <el-input\r\n          v-model=\"queryParams.bookPress\"\r\n          placeholder=\"请输入图书出版社\"\r\n          clearable\r\n          @keyup.enter.native=\"handleQuery\"\r\n        />\r\n      </el-form-item>\r\n      <el-form-item label=\"图书作者\" prop=\"bookAuthor\">\r\n        <el-input\r\n          v-model=\"queryParams.bookAuthor\"\r\n          placeholder=\"请输入图书作者\"\r\n          clearable\r\n          @keyup.enter.native=\"handleQuery\"\r\n        />\r\n      </el-form-item>\r\n      <el-form-item label=\"分类\" prop=\"bookCategory\">\r\n        <el-select v-model=\"queryParams.bookCategory\" placeholder=\"请选择分类\" clearable>\r\n          <el-option\r\n            v-for=\"dict in bookCategory\"\r\n            :key=\"dict.value\"\r\n            :label=\"dict.label\"\r\n            :value=\"dict.value\"\r\n          />\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\r\n        <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <el-row :gutter=\"10\" class=\"mb8\">\r\n      <right-toolbar :showSearch.sync=\"showSearch\" @queryTable=\"getList\"/>\r\n    </el-row>\r\n\r\n    <el-row :gutter=\"20\">\r\n      <el-col\r\n        :span=\"6\"\r\n        v-for=\"(item,index) in bookInfoList\"\r\n        :key=\"index\"\r\n      >\r\n        <el-card>\r\n          <el-tooltip class=\"item\" effect=\"dark\"  placement=\"top-start\">\r\n            <div slot=\"content\" class=\"div-descript\">简介：{{item.descript}}</div>\r\n            <div>\r\n              <div>\r\n                <el-image :src = item.coverAddress  class=\"el-image-add\"/>\r\n              </div>\r\n              <el-descriptions :column = 2>\r\n                <el-descriptions-item label=\"图书名称\">{{item.bookName}}</el-descriptions-item>\r\n                <el-descriptions-item label=\"图书出版社\">{{item.bookPress}}</el-descriptions-item>\r\n                <el-descriptions-item label=\"图书售格\">{{ item.price }}</el-descriptions-item>\r\n                <el-descriptions-item label=\"图书分类\">\r\n                  <dict-tag :options=\"bookCategory\" :value=\"item.bookCategory\"/>\r\n                </el-descriptions-item>\r\n                <el-descriptions-item label=\"图书余量\">{{item.bookRemaining}}</el-descriptions-item>\r\n              </el-descriptions>\r\n              <el-button type=\"primary\" plain class=\"el-button-div\" @click=\"openDialog(item.bookId,item.bookName)\">借阅</el-button>\r\n            </div>\r\n          </el-tooltip>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n\r\n    <pagination\r\n      v-show=\"total>0\"\r\n      :total=\"total\"\r\n      :page.sync=\"queryParams.pageNum\"\r\n      :limit.sync=\"queryParams.pageSize\"\r\n      @pagination=\"getList\"\r\n    />\r\n    <el-dialog :title=\"title\" :visible.sync=\"open\" width=\"500px\" append-to-body>\r\n      <div>\r\n        <label>借阅时长</label>\r\n        <el-select v-model=\"value\" placeholder=\"请选择借阅时长\">\r\n          <el-option\r\n            v-for=\"item in options\"\r\n            :key=\"item.value\"\r\n            :label=\"item.label\"\r\n            :value=\"item.value\">\r\n          </el-option>\r\n        </el-select>\r\n      </div>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"borrowBooks\">确 定</el-button>\r\n        <el-button @click=\"cancel\">取 消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { listBookInfo, getBookInfo, delBookInfo, addBookInfo, updateBookInfo, borrowBooks } from '@/api/book/bookInfo'\r\n\r\nexport default {\r\n  name: 'BookInfo',\r\n  data () {\r\n    return {\r\n      id: '',\r\n      bookName: '',\r\n      options: [{\r\n        value: '1',\r\n        label: '一周'\r\n      }, {\r\n        value: '2',\r\n        label: '两周'\r\n      }, {\r\n        value: '3',\r\n        label: '一个月'\r\n      }, {\r\n        value: '4',\r\n        label: '两个月'\r\n      }],\r\n      value: '',\r\n      bookCategory: [\r\n        {\r\n          label: '科幻',\r\n          value: '0',\r\n          raw: {\r\n            listClass: 'primary',\r\n            isDefault: 'Y',\r\n            default: true\r\n          }\r\n        }],\r\n      // 遮罩层\r\n      loading: true,\r\n      // 选中数组\r\n      ids: [],\r\n      // 非单个禁用\r\n      single: true,\r\n      // 非多个禁用\r\n      multiple: true,\r\n      // 显示搜索条件\r\n      showSearch: true,\r\n      // 总条数\r\n      total: 0,\r\n      // 图书信息表格数据\r\n      bookInfoList: [],\r\n      // 弹出层标题\r\n      title: '',\r\n      // 是否显示弹出层\r\n      open: false,\r\n      // 查询参数\r\n      queryParams: {\r\n        pageNum: 1,\r\n        pageSize: 10,\r\n        bookCore: null,\r\n        bookName: null,\r\n        barCode: null,\r\n        bookPress: null,\r\n        bookAuthor: null,\r\n        coverAddress: null,\r\n        bookCategory: null,\r\n        price: null,\r\n        publishStatus: null,\r\n        auditStatus: null,\r\n        bookPage: null,\r\n        descript: null,\r\n        indate: null,\r\n        modifiedTime: null\r\n      },\r\n      // 表单参数\r\n      form: {},\r\n      // 表单校验\r\n      rules: {\r\n        bookCore: [\r\n          { required: true, message: '图书编码不能为空', trigger: 'blur' }\r\n        ],\r\n        bookName: [\r\n          { required: true, message: '图书名称不能为空', trigger: 'blur' }\r\n        ],\r\n        barCode: [\r\n          { required: true, message: '国条码不能为空', trigger: 'blur' }\r\n        ],\r\n        bookPress: [\r\n          { required: true, message: '图书出版社不能为空', trigger: 'blur' }\r\n        ],\r\n        bookAuthor: [\r\n          { required: true, message: '图书作者不能为空', trigger: 'blur' }\r\n        ],\r\n        coverAddress: [\r\n          { required: true, message: '封面地址不能为空', trigger: 'blur' }\r\n        ],\r\n        bookCategory: [\r\n          { required: true, message: '分类不能为空', trigger: 'change' }\r\n        ],\r\n        price: [\r\n          { required: true, message: '图书销售价格不能为空', trigger: 'blur' }\r\n        ],\r\n        publishStatus: [\r\n          { required: true, message: '上下架状态不能为空', trigger: 'blur' }\r\n        ],\r\n        auditStatus: [\r\n          { required: true, message: '审核状态不能为空', trigger: 'blur' }\r\n        ],\r\n        bookPage: [\r\n          { required: true, message: '图书页数不能为空', trigger: 'blur' }\r\n        ],\r\n        descript: [\r\n          { required: true, message: '图书描述不能为空', trigger: 'blur' }\r\n        ],\r\n        indate: [\r\n          { required: true, message: '图书录入时间不能为空', trigger: 'blur' }\r\n        ],\r\n        modifiedTime: [\r\n          { required: true, message: '最后修改时间不能为空', trigger: 'blur' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  created () {\r\n    this.getList()\r\n  },\r\n  methods: {\r\n    /** 查询图书信息列表 */\r\n    getList () {\r\n      this.loading = true\r\n      listBookInfo(this.queryParams).then(response => {\r\n        this.bookInfoList = response.rows\r\n        this.total = response.total\r\n        this.loading = false\r\n      })\r\n    },\r\n    // 取消按钮\r\n    cancel () {\r\n      this.open = false\r\n      this.value = ''\r\n      this.reset()\r\n    },\r\n    // 表单重置\r\n    reset () {\r\n      this.form = {\r\n        bookId: null,\r\n        bookCore: null,\r\n        bookName: null,\r\n        barCode: null,\r\n        bookPress: null,\r\n        bookAuthor: null,\r\n        coverAddress: null,\r\n        bookCategory: null,\r\n        price: null,\r\n        publishStatus: 0,\r\n        auditStatus: 0,\r\n        bookPage: null,\r\n        descript: null,\r\n        indate: null,\r\n        modifiedTime: null\r\n      }\r\n      this.resetForm('form')\r\n    },\r\n    /** 搜索按钮操作 */\r\n    handleQuery () {\r\n      this.queryParams.pageNum = 1\r\n      this.getList()\r\n    },\r\n    /** 重置按钮操作 */\r\n    resetQuery () {\r\n      this.resetForm('queryForm')\r\n      this.handleQuery()\r\n    },\r\n    // 多选框选中数据\r\n    handleSelectionChange (selection) {\r\n      this.ids = selection.map(item => item.bookId)\r\n      this.single = selection.length !== 1\r\n      this.multiple = !selection.length\r\n    },\r\n    /** 新增按钮操作 */\r\n    handleAdd () {\r\n      this.reset()\r\n      this.open = true\r\n      this.title = '添加图书信息'\r\n    },\r\n    /** 修改按钮操作 */\r\n    handleUpdate (row) {\r\n      this.reset()\r\n      const bookId = row.bookId || this.ids\r\n      getBookInfo(bookId).then(response => {\r\n        this.form = response.data\r\n        this.open = true\r\n        this.title = '修改图书信息'\r\n      })\r\n    },\r\n    /** 提交按钮 */\r\n    submitForm () {\r\n      this.$refs.form.validate(valid => {\r\n        if (valid) {\r\n          if (this.form.bookId != null) {\r\n            updateBookInfo(this.form).then(response => {\r\n              this.$modal.msgSuccess('修改成功')\r\n              this.open = false\r\n              this.getList()\r\n            })\r\n          } else {\r\n            addBookInfo(this.form).then(response => {\r\n              this.$modal.msgSuccess('新增成功')\r\n              this.open = false\r\n              this.getList()\r\n            })\r\n          }\r\n        }\r\n      })\r\n    },\r\n    /** 删除按钮操作 */\r\n    handleDelete (row) {\r\n      const bookIds = row.bookId || this.ids\r\n      this.$modal.confirm('是否确认删除图书信息编号为\"' + bookIds + '\"的数据项？').then(function () {\r\n        return delBookInfo(bookIds)\r\n      }).then(() => {\r\n        this.getList()\r\n        this.$modal.msgSuccess('删除成功')\r\n      }).catch(() => {})\r\n    },\r\n    openDialog (id, bookName) {\r\n      this.bookName = bookName\r\n      this.title = '是否借阅 ' + bookName + ' 这本书'\r\n      this.id = id\r\n      this.open = true\r\n    },\r\n    borrowBooks () {\r\n      if (this.value === null || this.value === '') {\r\n        this.$modal.msg('请选择借阅时长')\r\n      } else {\r\n        borrowBooks(this.id, this.value).then(res => {\r\n          this.open = false\r\n          this.$modal.msgSuccess('图书 ' + this.bookName + ' 借阅成功')\r\n          this.bookName = ''\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.el-image-add{\r\n  width: 250px;\r\n  height: 250px;\r\n}\r\n.el-button-div {\r\nmargin-left: 100px\r\n}\r\n.div-descript {\r\n  width: 300px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=5f643946&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=5f643946&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5f643946\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}